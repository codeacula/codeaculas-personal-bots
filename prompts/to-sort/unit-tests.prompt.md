```plaintext
Write a unit test for the following function using the project's preferred framework. Use mocks where appropriate. The test should:
- Cover at least one successful case
- Cover one or more edge or failure cases
- Be named descriptively and run in isolation
```